<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chương 1</title>
    <link rel="stylesheet" href="/static/css/read.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />

</head>
<body>
    <div id="header">
        <div class="header__logo">
            <div class="header__logo__img">
                <img src="https://i.pinimg.com/736x/34/e4/c1/34e4c16dd7d9d9bad3e731a354daabb2.jpg" alt="">
            </div>
        </div>
        <div class="header__home">
            <a href="/index">DOCTRUYEN</a>
        </div>
        <div class="header__navbar">
            <ul class="header__navbar__nav">
                <li>
                    <a class="navar__nav__list" href=""><i class="fas fa-th-list"></i>
                        DANH SÁCH 
                    </a>
                    <ul id="listStoryByIdCategory">
                        <li><a href="">Ngôn tình</a></li>
                        <li><a href="">Đam mỹ</a></li>
                        <li><a href="">Xuyên không</a></li>
                        <li><a href="">Ngược</a></li>
                        <li><a href="">Trọng sinh</a></li>
                        <li><a href="">Đô thị</a></li>
                        <li><a href="">Điền văn</a></li>
                        <li><a href="">Sắc</a></li>
                    </ul>
                </li>
                <li>
                    <a class="navar__nav__list" href=""><i class="fas fa-th-list"></i>
                        PHÂN LOẠI THEO CHƯƠNG
                    </a>
                    <ul>
                        <li><a href="/ChapterFromTo?To=10">Dưới 10 chương</a></li>
                        <li><a href="/ChapterFromTo?From=10&&To=20">Trên 10 chương-20 chương </a></li>
                        <li><a href="/ChapterFromTo?From=20&&To=30">Trên 20 chương-30 chương </a></li>
                        <li><a href="/ChapterFromTo?From=30">Trên 30 chương</a></li>
                    </ul>
                </li>
                <li>
                    <a class="navar__nav__list" href=""><i class="fas fa-th-list"></i>
                        THÊM
                    </a>
                    <ul id='role'>
                        <li><a href="">nhi hiền lành</a></li>
                        <li><a href="">nhi nhân hậu</a></li>
                        <li><a href="">nhi tốt bụng</a></li>
                        <li><a href="">nhi nhân ái</a></li>
                    </ul>
                </li>
            </ul>
        </div>
        <div class="header__search">
            <div action="" id="formSearchStory">
                <input onkeyup="search()" type="search" id="searchStory" name="searchStory" placeholder="Tìm kiếm...">
                <i class="fas fa-search"></i>
            </div>
        </div>
        <div class="header__User">
            <div class="header__User__signUp" id="signup">
                <a href="login">ĐĂNG NHẬP<i class="fas fa-user"></i></a>
            </div>
        </div>
    </div>
    <div id="container">
        <div class="container__tiltle">
            <a href="">TUẤN CHÓ PHIÊU LƯU KÍ 1</a>
            <a href="">Chương 1</a>
            <div class="container__tiltle__choosechapter">
                <div class="tiltle__choosechapter__beaf">
                    <a href="">Chương trước</a>
                </div>
                <div class="tiltle__choosechapter__list">
                    <i class="fas fa-list-alt"></i>
                </div>
                <div class="tiltle__choosechapter__beaf">
                    <a href="">Chương sau</a>
                </div>
            </div>
        </div>
        <div class="container__content">
            <p>
                </p>
        </div>
        <div class="container__tiltle">
            <div class="container__tiltle__choosechapter">
                <div class="tiltle__choosechapter__beaf">
                    <a href="">Chương trước</a>
                </div>
                <div class="tiltle__choosechapter__list">
                    <i class="fas fa-list-alt"></i>
                </div>
                <div class="tiltle__choosechapter__beaf">
                    <a href="">Chương sau</a>
                </div>
            </div>
        </div>    
    </div>
    <div class="rating">
        <span class="star" data-value="1">&#9733;</span>
        <span class="star" data-value="2">&#9733;</span>
        <span class="star" data-value="3">&#9733;</span>
        <span class="star" data-value="4">&#9733;</span>
        <span class="star" data-value="5">&#9733;</span>
      </div>
      <div id="footer">
        <div class="footer__information">
            <p><b>DOCTRUYEN</b>:  Đọc truyện online, đọc truyện chữ, truyện hay. Website luôn cập nhật những bộ truyện mới thuộc các thể loại đặc sắc như truyện tiên hiệp, truyện kiếm hiệp, hay truyện ngôn tình một cách nhanh nhất. Hỗ trợ mọi thiết bị như di động và máy tính bảng.</p>
        </div>
    </div>
</body> 
<script>
    var rating=0;
    const stars = document.querySelectorAll('.star');

stars.forEach(function(star) {
  star.addEventListener('click', setclickRating);
  star.addEventListener('mouseover', setRating);
  star.addEventListener('mouseout', outRating);
});

function setclickRating(e) {
  const value = parseInt(e.target.getAttribute('data-value'));
  rating=e.target.getAttribute('data-value');
  const parent = e.target.parentNode;
  const children = parent.children;
  for(let i=0; i<children.length; i++) {
    if(i<value) {
      children[i].classList.add('active');
    } else {
      children[i].classList.remove('active');
    }
  }
  RATING();
}
function setRating(e) {
    const value = parseInt(e.target.getAttribute('data-value'));
   
    const parent = e.target.parentNode;
    const children = parent.children;

    for(let i=0; i<children.length; i++) {
      if(i<value) {
        children[i].classList.add('active');
      } else {
        children[i].classList.remove('active');
      }
    }
  }
function outRating(e) {
    const value = parseInt(e.target.getAttribute('data-value'));
    const parent = e.target.parentNode;
    const children = parent.children;
    
    for(let i=0; i<children.length; i++) {
        if(rating-1<i){
         children[i].classList.remove('active');
        }
        else{
            children[i].classList.add('active');
        }
    }
  }
function RATING(){
    const xhttp =new XMLHttpRequest()
    const postrating={
        rating:rating    
    }
    PostRating=JSON.stringify(postrating);
    //khai báo phương thức và đường dẫn để request
    xhttp.open("POST", "/apiV1/history/"+window.location.pathname.substring(6),false);
    //định dạng gửi đi787
    xhttp.setRequestHeader("Content-type","application/json")
    xhttp.setRequestHeader('userID',localStorage.getItem('userID'));
    //gửi
    xhttp.send(PostRating); 
}
</script>  
<script src="/static/js/base.js"></script>
<script src="/static/js/read.js"></script>
</html>